# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/helm.toolkit.fluxcd.io/helmrelease_v2.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: actions-runner-large
    namespace: actions-runner
spec:
    interval: 30m
    chart:
        spec:
            chart: gha-runner-scale-set
            version: 0.9.2
            sourceRef:
                kind: HelmRepository
                name: actions-runner-controller-charts
                namespace: flux-system
    install:
        remediation:
            retries: 3
    upgrade:
        cleanupOnFail: true
        remediation:
            strategy: rollback
            retries: 3
    dependsOn:
        - name: actions-runner-controller
          namespace: actions-runner
    values:
        nameOverride: actions-runner-large
        runnerScaleSetName: actions-runner-large
        minRunners: 1
        maxRunners: 6
        containerMode:
            type: dind
        githubConfigSecret:
            github_app_id: ${ACTION_RUNNER_CONTROLLER_GITHUB_APP_ID}
            github_app_installation_id: ENC[AES256_GCM,data:nYjHLG4ESuI=,iv:d3w70Abi6e0qtn4laRelLFGRVanzWmiAGbLU481rwEA=,tag:iqCVP2Io4afxZkgn0Gj4oQ==,type:str]
            github_app_private_key: ENC[AES256_GCM,data:O6ZjzTGi3g/970NiAv9+gtnXf/4DQVAhBOE92K03aW98qnmJIy7PuygZoweXioWQsD0o8yWCmU/pTp4FEfwvf1DBX2PmKxEXqwz6nb5pAVRs6DGg2PIW+mrewISlQIaEpcfjt/AvdxPgLXhYZrC29CWTpPjMMIe5o8uHmGdD+oWUK5PrE23gSrft0J+JkwJ7bKoCxJu3hNbEz4qQbikjXy8E8lymD7aGANbFoyOwXF1vprDkAi/iO7c8O/zaz8jwh6EeKHOUJECWgLyOlWBLWHN2iI7y1R31k8+0aVY5N4sd8RQYeH7y12xOryR5uSAHl6mCjh8PMQjRowr5BCmGBW5DYcKg41/sy6awQESUoLS8ETAQn4FXhVUmFYO6acWg1beNsWpqVH2aGvQuYbMmSaVcxgUwgIftjDqYUVBLkZ7ONA+z1/IC04QpnvlkfIsHmX4d/R6WOHzKa4OieeouN8/dywgvV/E6iXUHcVPjkk/xFGGy0CtYX58V3nmnb5O+HU02zUuMtEahTYXMG3iX3SajAKfx2S6xggz2CP1V6xYRLB6dBnwqmWvQ74Gg0MqpBGIiyfKcbjmTc2np/UDW9hOiNjug9LRpjB04O28sp/TEyKzuZXSl4cRwekqwJM1xQqmknxXjtyYNHHHHbrqVqHol4w6myLSpNteVVnBKybu5hAjoOC4oQZp+NdJ57Tx8a6ZzQx8G60pcDfuayfY1nyCHfF2h7Mhd4zsfVAFgPthtKd5qHf9OqgUebI5V9esEdkwj1p1HQmNYBp3MSkXyLiIb0kpoJ9XSRj9Q7cu4m6Kh2xP+Lteoidu1WWWm+6wbQdI/DOyIXH+aDqgSLGBlvcgbwTX/WRGorm+G6NfD7SvnA4Mj0iqOsGDwPNv7k6Vj4yfzCZKmPfXvtfjG2dSHH1hgoOdkFOdYdZ06UMi66t75ePSJ0v2vJDHvJOQ0T+f/l81M22K9aN8iBTLRIDPC3mnrSYs66ZxBHZTxRYRpxEy2cJuwFdpAQ6HJeJvLJsQZLkIg77LSegG0s/2lBEBP97oDay7p3/RzP3pqlIXcGG5G/T2/8Wn2Pi29SEAwMUA7O3JzAJ8AhcZvros0ZV3WmOAUTa4LdxtMbNECjHvl+NbQcDeOTLC2dZQbqxpQPV3GKJ2mXlLqZE4iGdQ9sC/M2IH+x4LPUSxzQEniWwuNikBS0itmNMpkFjC7Z2Y9KPjJmsO/2yBQMmOJkholnULZ4WiiU5B2xQOj8bmdZ5Xqzc2Bo8VRSxtMR09yQhzefbw8EIgYltmlA5Xv+Fh4cpTw01irQOekmKufnGwVsTi2r1Z4UCvI4ViYtzHE/puQ9C11jgputxqw46adz5DaB0iwHaD/Plo7AeVrmrftL5lvrjtSCBqcqHd9hjrkvKjqvmH7R7GSIgGSFYyWsMcIt7KLOVf7ftAzkZbduKXY0KJwnM79/rkaAfgTBfdEJ6RAW+tservgQq8+nmx5fl5sqRFVnlP0eYN1ZXC8V8Zdomzi/UhK4NCOmZQcwfrbI8oO1qUsClOCWMePYy++18WFWkCuiNV1mzFPWLa9Zb45F66JeSMj80hOWlYJVfMmtogYz+hbyIVrwiciEaBuecwPEMRnKEVvDGjzmZaMGXXNaHxW5vPw+648uuVAkkfe4F9XmbDYxdsVC9VClGAO+zLYZoqRdQX7s3xHXMx+2/xBUUrB7TjDFq7n3BBIocVMthJ3RqjL8n8XhHsPH1B9SOYsdHfJ6fD/wfL8tlDpYDDnVouoSHU3cCyE5SW5/xqk+2kJfiOIXWjfZ2magCdN3R3j6QZc9M+nWhZzDEPq1JBBy1Jms5YQiyscH3DZbZCZjMpgCIJLUDT5EN+2pLljH2KmHtCxncC32kI/Jq08uqQANTb+u5hUXm8WXhfeq7Vtj9YIFqqVTc7la3uEs2n1zeN7x/EkInbzhrzoXuz++QC0THnpG5Ym46eU9LEdi1RPjubMCNvHYQ4dbRirtXOApon4wgTiDIeS7jD9E1TbJflG5BDBYYGt8qPuFiCOkBUi8lIBrbGIYvz7F8isL9r8eOQb7V80vgrmluUvwKpEEQJ30UdCqwwONVnM6JsgrLqfExiodWsn0DtZZ5RO9mi3/aRoc1gBxTtFTrncw9ctAfMgxWwlZWX7f97cA9oFlaM97Apu4BDqf970EujX1HHUiaBRz1OBNie7AFAPmm9LmU8RyCfKKEiibpo8pMVHeqI6uw==,iv:KIyveUU3zvf/f9AnzNg2Lqcs89I/wdtzT4GbhENfJWk=,tag:hq5HdrQW/RH8TPTTXOSY6Q==,type:str]
        githubConfigUrl: https://github.com/truecharts
        controllerServiceAccount:
            name: actions-runner-controller
            namespace: actions-runner
        template:
            spec:
                containers:
                    - name: runner
                      image: ghcr.io/truecharts/charts-ci:latestsha256:c5cd9b58d7cbaae65e5f5c4d8e6ee3c5182d6645ba0166863051ccfe747bb940
                      command:
                        - /home/runner/run.sh
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1uzy27yg04slm0t4naapemy207fd7uh4lda70dxnh932e5dd8n55skgcdrq
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmWHFuSmptQVkzaUg5S2Fo
            L3ZEYlJqdTQwdEQ2V1VsUGJ1bE02SWRWaFVjCm9qd2o5UUI2N1FlS0YzMk1NaVVD
            Vk5IUzdXcW82WHM1OEFteVFTS2hmV2cKLS0tIFVlZEhHaTI4U3hDMjdnRDVyRExE
            dTNHTm9CUmtoTGtCWFdkdFh6MWpPd0kK87FRRN8T3xgo/mT/g9egQkqUVNlBU6KE
            APBC4PIVkYlLGKzpqVbXVFPT034Bxp8rDTIHa6m+yco3sy1bq3Y9WA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-23T18:58:19Z"
    mac: ENC[AES256_GCM,data:+o8cKmsiAng9G12/6aq/Lkmor2HOv+zk6x490eWlxs/2fdMxU25UVZJi2jD7tQv/Sb+SQcnxleml3Drg7QXF2dNs1MYMd694sr9zKBCI16KCUOX6iip/UqwN1k2hLUO8KkNnqqwa/DkOTaEZNoGoWI2UZvfWhLQzof4EAwPm+gM=,iv:GrYB/8AHR+V3buofBH3yBfXnD8rNasMABqBnA3TABBI=,tag:nTmyBK0nCQZ5qMlNrv8YMQ==,type:str]
    pgp: []
    encrypted_regex: ((?i)(github_app_private_key|github_app_installation_id))
    version: 3.8.1
